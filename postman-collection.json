{
  "info": {
    "name": "Restaurant Ordering System API",
    "description": "Complete API collection for the Restaurant Ordering System with RBAC",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login - Admin (Nick Fury)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"nick.fury@shield.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/callback/credentials",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "callback", "credentials"]
            }
          }
        },
        {
          "name": "Login - Manager India (Captain Marvel)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"carol.danvers@avengers.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/callback/credentials",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "callback", "credentials"]
            }
          }
        },
        {
          "name": "Login - Member India (Thanos)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"thanos@titan.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/callback/credentials",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "callback", "credentials"]
            }
          }
        },
        {
          "name": "Get Session",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{baseUrl}}/api/auth/session",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "session"]
            }
          }
        }
      ]
    },
    {
      "name": "Restaurants",
      "item": [
        {
          "name": "Get All Restaurants",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/restaurants",
              "host": ["{{baseUrl}}"],
              "path": ["api", "restaurants"]
            },
            "description": "Get all restaurants. Results are filtered by country for non-admin users."
          }
        },
        {
          "name": "Get Restaurant by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/restaurants/{{restaurantId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "restaurants", "{{restaurantId}}"]
            },
            "description": "Get restaurant details including menu items. Validates country access."
          }
        }
      ]
    },
    {
      "name": "Orders",
      "item": [
        {
          "name": "Get All Orders",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            },
            "description": "Get all orders. Members and Managers see only their own orders. Admin sees all orders."
          }
        },
        {
          "name": "Create Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"restaurantId\": \"{{restaurantId}}\",\n  \"items\": [\n    {\n      \"menuItemId\": \"{{menuItemId}}\",\n      \"quantity\": 2\n    }\n  ],\n  \"deliveryAddress\": \"123 Main Street, Mumbai, India\",\n  \"specialInstructions\": \"Please ring the doorbell\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders"]
            },
            "description": "Create a new order. Requires createOrder permission. Validates country access."
          }
        },
        {
          "name": "Get Order by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}"]
            },
            "description": "Get order details. Validates ownership and country access."
          }
        },
        {
          "name": "Checkout Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paymentMethodId\": \"{{paymentMethodId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/checkout",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "checkout"]
            },
            "description": "Process payment for order. Requires checkout permission (Admin/Manager only)."
          }
        },
        {
          "name": "Cancel Order",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/orders/{{orderId}}/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["api", "orders", "{{orderId}}", "cancel"]
            },
            "description": "Cancel an order. Requires cancelOrder permission (Admin/Manager only). Refunds if already paid."
          }
        }
      ]
    },
    {
      "name": "Payment Methods",
      "item": [
        {
          "name": "Get Payment Methods",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/payment-methods",
              "host": ["{{baseUrl}}"],
              "path": ["api", "payment-methods"]
            },
            "description": "Get all payment methods for current user."
          }
        },
        {
          "name": "Create Payment Method - Credit Card",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"Credit Card\",\n  \"cardNumber\": \"****1234\",\n  \"cardHolderName\": \"John Doe\",\n  \"expiryMonth\": 12,\n  \"expiryYear\": 2027,\n  \"isDefault\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/payment-methods",
              "host": ["{{baseUrl}}"],
              "path": ["api", "payment-methods"]
            },
            "description": "Create a new credit card payment method."
          }
        },
        {
          "name": "Create Payment Method - UPI",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"type\": \"UPI\",\n  \"upiId\": \"user@paytm\",\n  \"isDefault\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/payment-methods",
              "host": ["{{baseUrl}}"],
              "path": ["api", "payment-methods"]
            },
            "description": "Create a new UPI payment method."
          }
        },
        {
          "name": "Update Payment Method",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isDefault\": true,\n  \"cardHolderName\": \"Updated Name\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/payment-methods/{{paymentMethodId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "payment-methods", "{{paymentMethodId}}"]
            },
            "description": "Update payment method. Requires updatePaymentMethod permission (Admin only)."
          }
        },
        {
          "name": "Delete Payment Method",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/payment-methods/{{paymentMethodId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "payment-methods", "{{paymentMethodId}}"]
            },
            "description": "Delete payment method. Soft delete (sets isActive: false)."
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "restaurantId",
      "value": "",
      "type": "string"
    },
    {
      "key": "menuItemId",
      "value": "",
      "type": "string"
    },
    {
      "key": "orderId",
      "value": "",
      "type": "string"
    },
    {
      "key": "paymentMethodId",
      "value": "",
      "type": "string"
    }
  ]
}
